{"version":3,"sources":["components/integration/integration.component.ts"],"names":[],"mappings":"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","file":"integration.component.js","sourcesContent":["import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { NgModule, Component, Inject, forwardRef, Injector, OpaqueToken } from \"@angular/core\";\r\n\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { ChartModule } from 'angular2-highcharts';\r\nimport { IDashboardService, IImageService } from \"../../interfaces/interfaces\";\r\nimport { DashboardService } from \"../../services/dashboardService\";\r\nimport { ImageService } from \"../../services/imageService\";\r\nimport { IResponse, IContainerScanned, IContainerStatus } from \"../../models/viewModels\";\r\n\r\n@Component({\r\n    selector: \"charts\",\r\n    templateUrl: \"/view/components/integration/integration.component.html\"\r\n})\r\n\r\nexport class IntegrationComponent {\r\n    title: string = \"Integration Charts\";\r\n    pieOptions: any;\r\n    imagePath: string;\r\n    imageBase64: string;\r\n    imageBytes: any;\r\n    containerStatus: IContainerStatus;\r\n    imageAsBytes: any;\r\n\r\n    ngOnInit() {\r\n        this.getContainerStatus();\r\n        //this.getImageBase64();\r\n        this.getImagePath();\r\n        //this.getImageBytes();\r\n    }\r\n    constructor( @Inject('IDashboardService') private dashboardService: IDashboardService, @Inject('IImageService') private imageService: IImageService) {\r\n\r\n    }\r\n\r\n    getImagePath = () => {\r\n        this.imageService.getImagePath().subscribe(result => {\r\n            this.imagePath = result.containerImage;\r\n            console.info(this.imagePath);\r\n\r\n            var fr = new FileReader();\r\n            var extension = \"tiff\";\r\n            fr.onload = function (e) {\r\n                \r\n                    ////Using tiff.min.js library - https://github.com/seikichi/tiff.js/tree/master\r\n                    //console.debug(\"Parsing TIFF image...\");\r\n                    ////initialize with 100MB for large files\r\n                    //Tiff.initialize({\r\n                    //    TOTAL_MEMORY: 100000000\r\n                    //});\r\n                    //var tiff = new Tiff({\r\n                    //    buffer: e.target.result\r\n                    //});\r\n                    //var tiffCanvas = tiff.toCanvas();\r\n                    //(tiffCanvas).css({\r\n                    //    \"max-width\": \"100px\",\r\n                    //    \"width\": \"100%\",\r\n                    //    \"height\": \"auto\",\r\n                    //    \"display\": \"block\",\r\n                    //    \"padding-top\": \"10px\"\r\n                    //}).addClass(\"preview\");\r\n                    //doc.append(tiffCanvas);\r\n                \r\n\r\n            }\r\n            fr.onloadend = function (e) {\r\n                console.debug(\"Load End\");\r\n            }\r\n            //fr.readAsArrayBuffer(files[0]);\r\n        });\r\n    }\r\n    getImageBase64 = () => {\r\n        this.imageService.getImageAsBase64().subscribe(result => {\r\n            this.imageBase64 = result.containerImageBase64;\r\n            console.info(this.imageBase64);\r\n        });\r\n    }\r\n    getImageBytes = () => {\r\n        this.imageService.getImageAsByteArrray().subscribe(result => {\r\n            this.imageBytes = result;\r\n            var uInt8Array = new Uint8Array(this.imageBytes);\r\n            var i = uInt8Array.length;\r\n            var binaryString = new Array(i);\r\n            while (i--) {\r\n                binaryString[i] = String.fromCharCode(uInt8Array[i]);\r\n            }\r\n            var data = binaryString.join('');\r\n\r\n            // Base64 encoded image and assign it to the scope\r\n            this.imageAsBytes = window.btoa(data);\r\n\r\n            console.info(this.imageAsBytes);\r\n        });\r\n    }\r\n    getContainerStatus = () => {\r\n        this.dashboardService.getContainerScanStatus<IContainerStatus>().subscribe(result => {\r\n            this.containerStatus = result;\r\n            console.info(this.containerStatus);\r\n            this.pieOptions = {\r\n                title: { text: 'Container Scan Status' },\r\n                chart: { type: 'pie' },\r\n\r\n                series: [{\r\n                    name: 'Container Scan Status',\r\n                    colorByPoint: true,\r\n                    data: [{\r\n                        name: 'Ignored Containers',\r\n                        y: this.containerStatus.ignoredContainers\r\n                    }, {\r\n                        name: 'Bad Containers',\r\n                        y: this.containerStatus.badContainers\r\n                    },\r\n                    {\r\n                        name: 'Passed Containers',\r\n                        y: this.containerStatus.goodContainers,\r\n                        sliced: true,\r\n                        selected: true\r\n                    }]\r\n                }]\r\n            };\r\n\r\n        });\r\n\r\n    }\r\n\r\n}\r\n"]}